<!DOCTYPE html>
<html lang="lt" class="overflow-x-hidden">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Taupuolis.lt</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Flowbite UI komponentams (slideriui) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
  </head>
  <body class="bg-white text-gray-900">
    <!-- Header su logotipu, paieška ir prisijungimu -->
    <header class="border-b bg-white sticky top-0 z-50">
      <div class="flex items-center justify-between max-w-7xl mx-auto px-6 py-4">
        <a href="/" class="text-2xl font-bold text-yellow-600">Taupuolis.lt</a>
        <!-- Paieška desktopui -->
        <form id="search-form" autocomplete="off" class="hidden md:block ml-6 w-64">
          <input
            type="text"
            id="search-input"
            placeholder="Ieškoti pardavėjo..."
            class="w-full px-4 py-2 border rounded focus:outline-none"
          />
          <div id="search-results" class="absolute left-0 right-0 mt-1 bg-white border rounded shadow-lg z-50 hidden"></div>
        </form>
        <!-- Hamburger mygtukas tik mobile -->
        <button id="menu-toggle" class="md:hidden p-2 rounded focus:outline-none">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
        <!-- Meniu desktopui -->
        <nav class="hidden md:flex space-x-8 items-center">
          <a href="/pardavejai.html" class="hover:underline">Visi pardavėjai</a>
          <a href="/auth/prisijungti.html" class="hover:underline">Prisijungti</a>
          <a href="/auth/registruotis.html" class="hover:underline">Registruotis</a>
        </nav>
      </div>
    </header>
    <!-- Overlay ir drawer meniu mobilui -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-40 z-50 hidden md:hidden"></div>
    <nav id="mobile-menu" class="fixed top-0 right-0 w-80 max-w-full h-full bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 md:hidden">
      <button id="menu-close" class="absolute top-4 right-4 p-2">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
      <!-- Paieška mobilui -->
      <form id="search-form-mobile" autocomplete="off" class="mt-16 mb-4 px-6">
        <input
          type="text"
          id="search-input-mobile"
          placeholder="Ieškoti pardavėjo..."
          class="w-full px-4 py-2 border rounded focus:outline-none"
        />
        <div id="search-results-mobile" class="absolute left-0 right-0 mt-1 bg-white border rounded shadow-lg z-50 hidden"></div>
      </form>
      <div class="flex flex-col space-y-4 px-6">
        <a href="/pardavejai.html" class="py-2 border-b">Visi pardavėjai</a>
        <a href="/auth/prisijungti.html" class="py-2 border-b">Prisijungti</a>
        <a href="/auth/registruotis.html" class="py-2 border-b">Registruotis</a>
        <a href="#" class="py-2 border-b">Nuolaidos garantija</a>
        <a href="#" class="py-2 border-b">Taupuolio gidas</a>
        <a href="#" class="py-2 border-b">Populiaru</a>
        <a href="#" class="py-2 border-b">Kategorijos</a>
      </div>
    </nav>
    <!-- Mega menu žemiau (tik desktopui) -->
    <nav class="border-b bg-gray-50 hidden md:block sticky top-[72px] z-40">
      <div class="flex justify-center space-x-12 max-w-7xl mx-auto px-6 py-2">
        <!-- Nuolaidos garantija -->
        <div class="group inline-block relative">
          <button class="inline-flex items-center px-4 py-2 text-gray-700 hover:text-gray-900 focus:outline-none">
            Nuolaidos garantija
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
          <div class="absolute left-1/2 top-full mt-0 w-[400px] -translate-x-1/2 bg-white shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible fade z-50 focus-within:opacity-100 focus-within:visible">
            <div class="px-6 py-6 grid grid-cols-1 gap-4">
              <a href="#" class="block text-gray-800 hover:text-gray-900">Apie garantiją</a>
              <a href="#" class="block text-gray-800 hover:text-gray-900">Kaip veikia?</a>
            </div>
          </div>
        </div>
        <!-- Taupuolio gidas -->
        <div class="group inline-block relative">
          <button class="inline-flex items-center px-4 py-2 text-gray-700 hover:text-gray-900 focus:outline-none">
            Taupuolio gidas
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
          <div class="absolute left-1/2 top-full mt-0 w-[400px] -translate-x-1/2 bg-white shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible fade z-50 focus-within:opacity-100 focus-within:visible">
            <div class="px-6 py-6 grid grid-cols-1 gap-4">
              <a href="#" class="block text-gray-800 hover:text-gray-900">Patarimai</a>
              <a href="#" class="block text-gray-800 hover:text-gray-900">Straipsniai</a>
            </div>
          </div>
        </div>
        <!-- Populiaru -->
        <div class="group inline-block relative">
          <button class="inline-flex items-center px-4 py-2 text-gray-700 hover:text-gray-900 focus:outline-none">
            Populiaru
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
          <div class="absolute left-1/2 top-full mt-0 w-[400px] -translate-x-1/2 bg-white shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible fade z-50 focus-within:opacity-100 focus-within:visible">
            <div class="px-6 py-6 grid grid-cols-1 gap-4">
              <a href="#" class="block text-gray-800 hover:text-gray-900">Top pardavimai</a>
              <a href="#" class="block text-gray-800 hover:text-gray-900">Naujausi</a>
              <a href="#" class="block text-gray-800 hover:text-gray-900">Akcijos</a>
            </div>
          </div>
        </div>
        <!-- Kategorijos -->
        <div class="group inline-block relative">
          <button class="inline-flex items-center px-4 py-2 text-gray-700 hover:text-gray-900 focus:outline-none">
            Kategorijos
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-1/2 top-full mt-0 w-[800px] -translate-x-1/2 bg-white shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible fade z-50 focus-within:opacity-100 focus-within:visible">
            <div class="px-6 py-8 grid grid-cols-4 gap-8">
              <div class="flex flex-col space-y-1">
                <a href="/kategorijos/kvepalai.html" class="block text-gray-800 hover:text-gray-900">Kvepalai</a>
                <a href="/kategorijos/kosmetika.html" class="block text-gray-800 hover:text-gray-900">Kosmetika</a>
                <a href="/kategorijos/vaikams.html" class="block text-gray-800 hover:text-gray-900">Vaikams</a>
                <a href="/kategorijos/maistas.html" class="block text-gray-800 hover:text-gray-900">Maistas</a>
                <a href="/kategorijos/elektronika.html" class="block text-gray-800 hover:text-gray-900">Elektronika</a>
              </div>
              <div class="flex flex-col space-y-1">
                <a href="/kategorijos/avalynė.html" class="block text-gray-800 hover:text-gray-900">Avalynė</a>
                <a href="/kategorijos/drabužiai.html" class="block text-gray-800 hover:text-gray-900">Drabužiai</a>
                <a href="/kategorijos/gyvūnams.html" class="block text-gray-800 hover:text-gray-900">Gyvūnams</a>
                <a href="/kategorijos/sportas.html" class="block text-gray-800 hover:text-gray-900">Sportas</a>
                <a href="/kategorijos/grožis.html" class="block text-gray-800 hover:text-gray-900">Grožis</a>
              </div>
              <div class="flex flex-col space-y-1">
                <a href="/kategorijos/sveikata.html" class="block text-gray-800 hover:text-gray-900">Sveikata</a>
                <a href="/kategorijos/buitis.html" class="block text-gray-800 hover:text-gray-900">Buitis</a>
                <a href="/kategorijos/gėrimai.html" class="block text-gray-800 hover:text-gray-900">Gėrimai</a>
                <a href="/kategorijos/paslaugos.html" class="block text-gray-800 hover:text-gray-900">Paslaugos</a>
                <a href="/kategorijos/aksesuarai.html" class="block text-gray-800 hover:text-gray-900">Aksesuarai</a>
              </div>
              <div class="flex flex-col space-y-1">
                <a href="/kategorijos/automobiliai.html" class="block text-gray-800 hover:text-gray-900">Automobiliai</a>
                <a href="/kategorijos/technika.html" class="block text-gray-800 hover:text-gray-900">Technika</a>
                <a href="/kategorijos/žaislai.html" class="block text-gray-800 hover:text-gray-900">Žaislai</a>
                <a href="/kategorijos/knygos.html" class="block text-gray-800 hover:text-gray-900">Knygos</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <!-- Main turinys -->
    <main class="py-8">
      <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-semibold mb-4">Pagrindinis turinys</h2>
        <!-- Banerių gridas vietoje karuselės -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
          <!-- Baneris 1 -->
          <div class="bg-white rounded-xl shadow-lg flex flex-col overflow-hidden">
            <div class="bg-yellow-300 flex items-center justify-between p-4">
              <div class="flex items-center gap-2">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Unsplash_logo.svg" alt="Unsplash" class="h-10 w-10 rounded bg-white shadow" />
                <span class="bg-yellow-400 text-xs font-bold px-2 py-1 rounded">VIP</span>
                <span class="bg-orange-200 text-orange-800 text-xs font-bold px-2 py-1 rounded">EXCLUSIVE</span>
              </div>
              <span class="text-lg font-bold">Unsplash</span>
            </div>
            <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80" alt="Free Unsplash" class="object-cover h-48 w-full" />
            <div class="p-4 flex-1 flex flex-col">
              <div class="font-bold text-lg mb-1">Nemokamas pavyzdinis baneris</div>
              <div class="text-gray-700 text-sm flex-1 mb-2">Gaukite 20% nuolaidą visiems Unsplash paveikslėliams! (juokaujame – jie visada nemokami)</div>
              <a href="https://unsplash.com/" target="_blank" rel="noopener" class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded font-semibold shadow">Shop Now</a>
            </div>
          </div>
          <!-- Baneris 2 -->
          <div class="bg-white rounded-xl shadow-lg flex flex-col overflow-hidden">
            <div class="bg-yellow-300 flex items-center justify-between p-4">
              <div class="flex items-center gap-2">
                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Google-flutter-logo.svg" alt="Flutter" class="h-10 w-10 rounded bg-white shadow" />
                <span class="bg-yellow-400 text-xs font-bold px-2 py-1 rounded">VIP</span>
                <span class="bg-orange-200 text-orange-800 text-xs font-bold px-2 py-1 rounded">EXCLUSIVE</span>
              </div>
              <span class="text-lg font-bold">Flutter</span>
            </div>
            <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=600&q=80" alt="Flutter" class="object-cover h-48 w-full" />
            <div class="p-4 flex-1 flex flex-col">
              <div class="font-bold text-lg mb-1">Flutter baneris</div>
              <div class="text-gray-700 text-sm flex-1 mb-2">Išbandykite Flutter – modernią UI kūrimo platformą!</div>
              <a href="https://flutter.dev/" target="_blank" rel="noopener" class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded font-semibold shadow">Shop Now</a>
            </div>
          </div>
          <!-- Baneris 3 -->
          <div class="bg-white rounded-xl shadow-lg flex flex-col overflow-hidden">
            <div class="bg-yellow-300 flex items-center justify-between p-4">
              <div class="flex items-center gap-2">
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" alt="Netflix" class="h-10 w-10 rounded bg-white shadow" />
                <span class="bg-yellow-400 text-xs font-bold px-2 py-1 rounded">VIP</span>
                <span class="bg-orange-200 text-orange-800 text-xs font-bold px-2 py-1 rounded">EXCLUSIVE</span>
              </div>
              <span class="text-lg font-bold">Netflix</span>
            </div>
            <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80" alt="Netflix" class="object-cover h-48 w-full" />
            <div class="p-4 flex-1 flex flex-col">
              <div class="font-bold text-lg mb-1">Netflix baneris</div>
              <div class="text-gray-700 text-sm flex-1 mb-2">Žiūrėk mėgstamiausius filmus ir serialus su nuolaida!</div>
              <a href="https://netflix.com/" target="_blank" rel="noopener" class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded font-semibold shadow">Shop Now</a>
            </div>
          </div>
        </div>
        <!-- Populiarios kategorijos -->
        <section class="mb-10">
          <h3 class="text-2xl font-bold text-center mb-6">Populiarios kategorijos</h3>
          <div class="flex flex-wrap justify-center gap-4">
            <a href="/kategorijos/kvepalai.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Kvepalai</a>
            <a href="/kategorijos/kosmetika.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Kosmetika</a>
            <a href="/kategorijos/maistas.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Maistas</a>
            <a href="/kategorijos/elektronika.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Elektronika</a>
            <a href="/kategorijos/drabužiai.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Drabužiai</a>
            <a href="/kategorijos/sportas.html" class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold px-8 py-3 rounded-lg shadow text-lg transition">Sportas</a>
          </div>
        </section>
        <!-- Informacinė juosta per visą plotį -->
        <div class="bg-yellow-200 py-6 w-full">
          <div class="flex flex-col md:flex-row items-center justify-center gap-12 px-4">
            <!-- Priežastis 1 -->
            <div class="flex items-center gap-4 flex-1 min-w-[220px]">
              <span class="flex items-center justify-center w-14 h-14 rounded-full bg-white shadow text-3xl">
                🔎
              </span>
              <div class="text-left">
                <div class="font-bold text-lg">Visi pasiūlymai peržiūrėti</div>
                <div class="text-sm text-gray-700">Mūsų komanda tikrina kiekvieną nuolaidą</div>
              </div>
            </div>
            <!-- Skirtukas -->
            <div class="hidden md:flex items-center justify-center">
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
            </div>
            <!-- Priežastis 2 -->
            <div class="flex items-center gap-4 flex-1 min-w-[220px]">
              <span class="flex items-center justify-center w-14 h-14 rounded-full bg-white shadow text-3xl">
                💡
              </span>
              <div class="text-left">
                <div class="font-bold text-lg">Nėra paslėptų kainų</div>
                <div class="text-sm text-gray-700">Matysite tik tikras galutines kainas</div>
              </div>
            </div>
            <!-- Skirtukas -->
            <div class="hidden md:flex items-center justify-center">
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
              <span class="w-2 h-2 bg-gray-400 rounded-full mx-1"></span>
            </div>
            <!-- Priežastis 3 -->
            <div class="flex items-center gap-4 flex-1 min-w-[220px]">
              <span class="flex items-center justify-center w-14 h-14 rounded-full bg-white shadow text-3xl">
                ⏰
              </span>
              <div class="text-left">
                <div class="font-bold text-lg">Kasdien atnaujinama</div>
                <div class="text-sm text-gray-700">Naujausi kodai ir akcijos kiekvieną dieną</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Banerių (dealų) carousel gridas -->
      <section>
        <h3 class="text-2xl font-bold text-center mb-6">Šiandienos TOP pasiūlymai</h3>
        <div id="deals-carousel" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
      </section>
    </main>
    <!-- Aprašymas apie Taupuolis.lt ir projekto idėją -->
    <section class="max-w-3xl mx-auto mt-12 mb-8 p-6 bg-white rounded-xl shadow text-center">
      <h4 class="text-2xl font-bold mb-2 text-yellow-600">Kas yra Taupuolis.lt?</h4>
      <p class="text-gray-700 mb-2">Taupuolis.lt – tai platforma, kurioje vienoje vietoje surenkami geriausi nuolaidų kodai, akcijos ir pasiūlymai iš populiariausių Lietuvos ir užsienio pardavėjų.</p>
      <p class="text-gray-700 mb-2">Mūsų tikslas – padėti taupyti laiką ir pinigus, kad rastum tik patikrintus, galiojančius ir tikrai naudingus pasiūlymus.</p>
      <p class="text-gray-700">Projektas nuolat tobulinamas ir atnaujinamas, todėl kviečiame sekti naujienas ir dalintis savo pastebėjimais!</p>
    </section>
    <!-- Footer -->
    <footer class="text-center text-sm text-gray-500 py-6 border-t mt-10">
      © 2025 Taupuolis.lt – Visos teisės saugomos.
    </footer>
    <script>
      // Pardavėjų failų sąrašas
      const vendors = [
        { name: 'Douglas', url: '/pardavejai/douglas.html' },
        { name: 'Glamur', url: '/pardavejai/glamur.html' },
        { name: 'Perfumer', url: '/pardavejai/perfumer.html' },
      ];
      // Kategorijų sąrašas
      const categories = [
        { name: 'Kvepalai', url: '/kategorijos/kvepalai.html' },
        { name: 'Kosmetika', url: '/kategorijos/kosmetika.html' },
        { name: 'Maistas', url: '/kategorijos/maistas.html' },
        { name: 'Elektronika', url: '/kategorijos/elektronika.html' },
        { name: 'Drabužiai', url: '/kategorijos/drabužiai.html' },
        { name: 'Sportas', url: '/kategorijos/sportas.html' },
      ];
      // Dealų sąrašas (dinamiškai iš visi_pasiulymai.json)
      let allDeals = [];
      fetch('visi_pasiulymai.json').then(r => r.json()).then(data => { allDeals = data; });

      function renderSearchResults(value, resultsEl) {
        const valueLower = value.trim().toLowerCase();
        if (!valueLower) {
          resultsEl.innerHTML = '';
          resultsEl.classList.add('hidden');
          return;
        }
        // Pardavėjai
        const vendorMatches = vendors.filter(v => v.name.toLowerCase().includes(valueLower));
        // Dealai
        const dealMatches = allDeals.filter(d =>
          d.pavadinimas.toLowerCase().includes(valueLower) ||
          (d.aprasymas && d.aprasymas.toLowerCase().includes(valueLower))
        ).slice(0, 5); // max 5
        // Kategorijos
        const categoryMatches = categories.filter(c => c.name.toLowerCase().includes(valueLower));
        let html = '';
        if (vendorMatches.length) {
          html += '<div class="px-4 py-2 text-xs text-gray-500">Pardavėjai</div>';
          html += vendorMatches.map(v => `<a href="${v.url}" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">${v.name}</a>`).join('');
        }
        if (dealMatches.length) {
          html += '<div class="px-4 py-2 text-xs text-gray-500">Pasiūlymai</div>';
          html += dealMatches.map(d => `<a href="/pasiulymai/${d.pavadinimas.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '')}.html" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">${d.pavadinimas} <span class='text-xs text-gray-400'>(${d.pardavejas})</span></a>`).join('');
        }
        if (categoryMatches.length) {
          html += '<div class="px-4 py-2 text-xs text-gray-500">Kategorijos</div>';
          html += categoryMatches.map(c => `<a href="${c.url}" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">${c.name}</a>`).join('');
        }
        // Papildomi linkai
        html += '<div class="px-4 py-2 text-xs text-gray-500">Kita</div>';
        html += `<a href="/naujienlaiskis.html" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">Prenumeruok naujienlaiškį</a>`;
        html += `<a href="/kategorijos/" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">Visos kategorijos</a>`;
        html += `<a href="/visi_pasiulymai.json" class="block px-4 py-2 hover:bg-gray-100 text-gray-800">Visi pasiūlymai (JSON)</a>`;
        if (!vendorMatches.length && !dealMatches.length && !categoryMatches.length) {
          html = '<div class="px-4 py-2 text-gray-500">Nieko nerasta</div>' + html;
        }
        resultsEl.innerHTML = html;
        resultsEl.classList.remove('hidden');
      }
      // Paieška desktopui
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      if (searchInput && searchResults) {
        searchInput.addEventListener('input', function() {
          renderSearchResults(this.value, searchResults);
        });
        searchInput.addEventListener('blur', function() {
          setTimeout(() => searchResults.classList.add('hidden'), 150);
        });
        searchInput.addEventListener('focus', function() {
          if (this.value.trim()) searchResults.classList.remove('hidden');
        });
      }
      // Paieška mobilui
      const searchInputMobile = document.getElementById('search-input-mobile');
      const searchResultsMobile = document.getElementById('search-results-mobile');
      if (searchInputMobile && searchResultsMobile) {
        searchInputMobile.addEventListener('input', function() {
          renderSearchResults(this.value, searchResultsMobile);
        });
        searchInputMobile.addEventListener('blur', function() {
          setTimeout(() => searchResultsMobile.classList.add('hidden'), 150);
        });
        searchInputMobile.addEventListener('focus', function() {
          if (this.value.trim()) searchResultsMobile.classList.remove('hidden');
        });
      }
      // Drawer tipo hamburger meniu mobilui
      const menuToggle = document.getElementById('menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileOverlay = document.getElementById('mobile-overlay');
      const menuClose = document.getElementById('menu-close');
      function openMenu() {
        mobileMenu.classList.remove('translate-x-full');
        mobileOverlay.classList.remove('hidden');
      }
      function closeMenu() {
        mobileMenu.classList.add('translate-x-full');
        mobileOverlay.classList.add('hidden');
      }
      if(menuToggle) menuToggle.addEventListener('click', openMenu);
      if(menuClose) menuClose.addEventListener('click', closeMenu);
      if(mobileOverlay) mobileOverlay.addEventListener('click', closeMenu);
      if(mobileMenu) {
        mobileMenu.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', closeMenu);
        });
      }
      // Banerių (dealų) carousel iš visi_pasiulymai.json
      async function loadDealsCarousel() {
        try {
          const res = await fetch('visi_pasiulymai.json');
          const deals = await res.json();
          // Filtruojam tik galiojančius (iki šiandienos arba vėliau)
          const now = new Date();
          const validDeals = deals.filter(d => {
            if (!d.terminas) return false;
            const date = new Date(d.terminas);
            return date >= now;
          });
          // Surūšiuojam pagal galiojimo datą (artimiausi viršuje)
          validDeals.sort((a, b) => new Date(a.terminas) - new Date(b.terminas));
          // Carousel state
          let start = 0;
          const showCount = 3;
          const grid = document.getElementById('deals-carousel');
          function renderCarousel() {
            let html = '';
            const shown = validDeals.slice(start, start + showCount);
            shown.forEach(deal => {
              html += `
                <a href="/pasiulymai/${deal.pavadinimas
                  .toLowerCase()
                  .replace(/[^a-z0-9]+/g, '-')
                  .replace(/(^-|-$)/g, '')
                }.html" class="bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden flex flex-col border border-gray-200 group">
                  <div class="relative h-48">
                    <img src="${deal.nuotraukos_url}" alt="${deal.pavadinimas}" class="w-full h-full object-cover" />
                    <img src="${deal.pardavejo_logo}" alt="${deal.pardavejas}" class="absolute bottom-2 left-2 h-10 w-10 rounded bg-white p-1 shadow border" />
                    <span class="absolute bottom-2 right-2 bg-yellow-400 text-xs font-bold px-2 py-1 rounded flex items-center gap-1 z-10">
                      <svg xmlns='http://www.w3.org/2000/svg' class='inline h-4 w-4 text-yellow-700' fill='currentColor' viewBox='0 0 20 20'><path d='M10 15l-5.878 3.09 1.122-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.756 4.635 1.122 6.545z'/></svg>
                      VIP RETAILER
                    </span>
                  </div>
                  <div class="p-4 flex-1 flex flex-col">
                    <div class="font-bold text-base mb-1">${deal.pavadinimas}</div>
                    <div class="font-bold uppercase text-xs text-gray-500 mb-1">${deal.pardavejas}</div>
                    <span class="bg-orange-200 text-orange-800 text-xs font-bold px-2 py-0.5 rounded mb-2 inline-block">EXCLUSIVE</span>
                    <div class="text-gray-700 text-sm flex-1 mb-2">${deal.aprasymas}</div>
                    <span class="text-xs text-gray-500">Galioja iki: ${deal.terminas}</span>
                  </div>
                </a>
              `;
            });
            grid.innerHTML = html;
          }
          renderCarousel();
          // Automatinis keitimas kas 5s
          setInterval(() => {
            start = (start + showCount) % validDeals.length;
            renderCarousel();
          }, 5000);
        } catch (e) {
          document.getElementById('deals-carousel').innerHTML = '<div class="text-center text-gray-500">Nepavyko užkrauti pasiūlymų.</div>';
        }
      }
      loadDealsCarousel();

      // Paieškos dropdown uždarymas paspaudus už jo
      function setupSearchDropdownClose(input, results) {
        if (!input || !results) return;
        document.addEventListener('mousedown', function(e) {
          if (!results.contains(e.target) && e.target !== input) {
            results.classList.add('hidden');
          }
        });
      }
      setupSearchDropdownClose(searchInput, searchResults);
      setupSearchDropdownClose(searchInputMobile, searchResultsMobile);
    </script>
  </body>
</html>
